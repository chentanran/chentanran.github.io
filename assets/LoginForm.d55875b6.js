var Y=Object.defineProperty,G=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var z=(t,a,e)=>a in t?Y(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e,B=(t,a)=>{for(var e in a||(a={}))K.call(a,e)&&z(t,e,a[e]);if(S)for(var e of S(a))Q.call(a,e)&&z(t,e,a[e]);return t},F=(t,a)=>G(t,J(a));import{B as W,L as X,d as q,O as Z,o as f,c as L,I as C,w as p,V as ee,a as o,N as se,U as k,n as V,z as A,y as oe,Y as ae,_ as te,b as ne,a7 as le,u as re,k as ie,a8 as ce,r as b,v as de,H as pe,e as P,t as R,g as d,a6 as D,a9 as N}from"./index.d9a62c66.js";import{E as ue,F as me}from"./Form.35a11685.js";import{E as fe}from"./el-divider.55b1f6df.js";import{r as $}from"./formRules.51d03834.js";import{u as ge}from"./useForm.8cfdaeef.js";import{l as he,g as ve,a as we}from"./index.d1d3747e.js";const _e=W({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},icon:{type:X,default:""}}),ye={click:t=>t instanceof MouseEvent},ke=["href"],be={name:"ElLink"},Pe=q(F(B({},be),{props:_e,emits:ye,setup(t,{emit:a}){const e=t,c=Z("link");function w(s){e.disabled||a("click",s)}return(s,l)=>(f(),L("a",{class:V([o(c).b(),o(c).m(s.type),o(c).is("disabled",s.disabled),o(c).is("underline",s.underline&&!s.disabled)]),href:s.disabled||!s.href?void 0:s.href,onClick:w},[s.icon?(f(),C(o(se),{key:0},{default:p(()=>[(f(),C(ee(s.icon)))]),_:1})):k("v-if",!0),s.$slots.default?(f(),L("span",{key:1,class:V(o(c).e("inner"))},[A(s.$slots,"default")],2)):k("v-if",!0),s.$slots.icon?A(s.$slots,"icon",{key:2}):k("v-if",!0)],10,ke))}}));var Re=oe(Pe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/link/src/link.vue"]]);const Ce=ae(Re);const Ie={class:"text-2xl font-bold text-center w-[100%]"},Ee={class:"flex justify-between items-center w-[100%]"},Se={class:"flex justify-between w-[100%]"},ze=q({setup(t){const a=ne(),e=le(),{currentRoute:c,addRoute:w,push:s}=re(),{t:l}=ie(),T={username:[$],password:[$]},U=ce([{field:"title",colProps:{span:24}},{field:"username",label:l("login.username"),value:"admin",component:"Input",colProps:{span:24},componentProps:{placeholder:l("login.usernamePlaceholder")}},{field:"password",label:l("login.password"),value:"admin",component:"InputPassword",colProps:{span:24},componentProps:{style:{width:"100%"},placeholder:l("login.passwordPlaceholder")}},{field:"tool",colProps:{span:24}},{field:"login",colProps:{span:24}},{field:"other",component:"Divider",label:l("login.otherLogin"),componentProps:{contentPosition:"center"}},{field:"otherIcon",colProps:{span:24}}]),g=30,I=b(!1),{register:j,elFormRef:x,methods:E}=ge(),_=b(!1),h="#999",y=b("");de(()=>c.value,r=>{var n;y.value=(n=r==null?void 0:r.query)==null?void 0:n.redirect},{immediate:!0});const H=async()=>{const r=o(x);await(r==null?void 0:r.validate(async n=>{if(n){_.value=!0;const{getFormData:i}=E,u=await i(),v=await he(u).catch(()=>{}).finally(()=>_.value=!1);if(v){const{wsCache:m}=N();m.set(a.getUserInfo,v.data),M()}}}))},M=async()=>{const{getFormData:r}=E,n=await r(),i={roleName:n.username},u=n.username==="admin"?await ve({params:i}):await we({params:i});if(u){const{wsCache:v}=N(),m=u.data.list||[];v.set("roleRouters",m),n.username==="admin"?await e.generateRoutes("admin",m).catch(()=>{}):await e.generateRoutes("test",m).catch(()=>{}),e.getAddRouters.forEach(O=>{w(O)}),e.setIsAddRouters(!0),console.log(y.value,e.addRouters[0].path,"path: redirect.value || permissionStore.addRouters[0].path"),s({path:y.value||e.addRouters[0].path})}};return(r,n)=>{const i=pe("Icon");return f(),C(o(me),{schema:o(U),rules:T,"label-position":"top","hide-required-asterisk":"",size:"large",onRegister:o(j)},{title:p(()=>[P("h2",Ie,R(o(l)("login.login")),1)]),tool:p(()=>[P("div",Ee,[d(o(ue),{modelValue:I.value,"onUpdate:modelValue":n[0]||(n[0]=u=>I.value=u),label:o(l)("login.remember"),size:"small"},null,8,["modelValue","label"]),d(o(Ce),{type:"primary",underline:!1},{default:p(()=>[D(R(o(l)("login.forgetPassword")),1)]),_:1})])]),login:p(()=>[d(o(fe),{loading:_.value,type:"primary",class:"w-[100%]",onClick:H},{default:p(()=>[D(R(o(l)("login.login")),1)]),_:1},8,["loading"])]),otherIcon:p(()=>[P("div",Se,[d(i,{icon:"ant-design:github-filled",size:g,class:"cursor-pointer anticon",color:h}),d(i,{icon:"ant-design:wechat-filled",size:g,class:"cursor-pointer anticon",color:h}),d(i,{icon:"ant-design:alipay-circle-filled",size:g,color:h,class:"cursor-pointer anticon"}),d(i,{icon:"ant-design:weibo-circle-filled",size:g,color:h,class:"cursor-pointer anticon"})])]),_:1},8,["schema","onRegister"])}}});var $e=te(ze,[["__scopeId","data-v-22155794"]]);export{$e as default};
